---
layout: math
title: 从零手写VIO-滑动窗口算法及VIO系统可观性和一致性
date: 2019-07-18 10:19:45 +0800
categories: [笔记]
tags: [slam]
---

* content
{:toc}

### 高斯分布(Gaussian Distribution) -> 信息矩阵(Information Matrix)

SLAM问题求解可以抽象成一个最大后验估计(Maximum a Posterior)问题：

$$
\begin{equation}
\begin{split}
	\xi_{MAP} &= \arg \max \limits_{\xi} p(\xi | r) \\
	&\Rightarrow \arg \max \limits_{\xi} \prod_{i}p(r_i | \xi)p(\xi) \\
	&\Rightarrow \arg \min \limits_{\xi} -\prod_{i}p(r_i | \xi)p(\xi) \\
	&\Rightarrow \arg \min \limits_{\xi} \left[ -\sum \limits_i \log p(r_i | \xi) - \log p(\xi) \right]
\end{split}
\end{equation}
$$


这里假设观测量$r_i$服从多元独立高斯分布，那么
$$p(r_i | \xi ) = \mathcal{N}(\mu_i,\Sigma_i),\, p(\xi)=\mathcal{N}(\mu_\xi,\Sigma_\xi)$$，$\xi_{MAP}$可以简化为：

$$
\begin{equation}
\begin{split}
	\xi_{MAP} &\Rightarrow \arg \min \limits_{\xi} \left[ -\sum \limits_i \log p(r_i | \xi) - \log p(\xi) \right] \\
	&\Rightarrow \arg \min \limits_{\xi} \left[ -\sum \limits_i \log \exp \left( -\frac{1}{2} (r_i-\mu_i)^T\Sigma_i(x-\mu) \right) 
	  -\log \exp \left( -\frac{1}{2} (\xi-\mu_\xi)^T\Sigma_\xi(\xi-\mu_\xi) \right) \right] \\
	&\Rightarrow \arg \min \limits_{\xi} \left\{ \sum \limits_{i} {|| r_i-\mu_i||}_{\Sigma_i}^{2} + {|| \xi-\mu_\xi ||}^2_{\Sigma_\xi} \right\}
\end{split}
\end{equation}
$$

最终，一个求最大后验概率的问题，变成了一个求各个独立观测量与先验范数和的最小二乘问题。

在多元高斯分布中，协方差矩阵的逆称之为信息矩阵。
* 协方差矩阵非对角元素为0表示对应变量之间没有相关性，大于0表示两变量正相关，小于0表示负相关，等于0不相关。
* 信息矩阵中非对角线元素为负数，表示在相应变量关于其他变量成正相关；为0表示相应元素关于其他变量条件独立；大于0表示相应变量间关于其他变量成负相关。

**协方差矩阵元素为0并不以为信息矩阵对应元素为0**

### 边际概率及舒尔补
#### 舒尔补 Schur Complement [1]

假设一个 (p+q)×(p+q)的矩阵M被分为A, B, C, D四个部分，分别是p×p、p×q、q×p以及q×q的矩阵：

$$
\begin{equation}
\begin{split}
	M=
	\begin{bmatrix}
	A & B \\
	C & D
	\end{bmatrix}
\end{split}
\end{equation}
$$

且D是**可逆**矩阵，则D在M中的**舒尔补**是$A-BD^{-1}C$。同理，若A可逆，则A在M中的舒尔补是$D-CA^{-1}B$。

舒尔补实际上是对M进行一些列初等变换之后得出的其中一部分矩阵块。假设存在一个下三角矩阵：

$$
\begin{equation}
\begin{split}
	L=
	\begin{bmatrix}
	I_p & 0 \\
	-CA^{-1} & I_q
	\end{bmatrix}
\end{split}
\end{equation}
$$

M左乘L作行变换：

$$
\begin{equation}
\begin{split}
	L \cdot M &= 
	\begin{bmatrix}
	I_p & 0 \\
	-CA^{-1} & I_q
	\end{bmatrix}
	\begin{bmatrix}
	A & B \\
	C & D
	\end{bmatrix} \\
	&= 
	\begin{bmatrix}
	A & B \\
	0 & D-CA^{-1}B
	\end{bmatrix} \\

	&= 
	\begin{bmatrix}
	A & 0 \\
	0 & D-CA^{-1}B
	\end{bmatrix} 

	\begin{bmatrix}
	I_p & A^{-1}B \\
	0 & I_q
	\end{bmatrix} 
\end{split}
\end{equation}
$$

所以通过上面式子可以求出$M^{-1}$：

$$
\begin{equation}
\begin{split}
	M^{-1}
	&= 
	\begin{bmatrix}
	I_p & A^{-1}B \\
	0 & I_q
	\end{bmatrix}^{-1} 
	\begin{bmatrix}
	A & 0 \\
	0 & D-CA^{-1}B
	\end{bmatrix}^{-1}
	L \\
	&= 
	\begin{bmatrix}
	I_p & -A^{-1}B \\
	0 & I_q
	\end{bmatrix}
	\begin{bmatrix}
	A^{-1} & 0 \\
	0 & {(D-CA^{-1}B)}^{-1}
	\end{bmatrix}
	\begin{bmatrix}
	I_p & 0 \\
	-CA^{-1} & I_q
	\end{bmatrix}
\end{split}
\end{equation}
$$

### 参考文献

<font size="2">[1]. 中文维基-舒尔补<a href="https://wikipedia.tk.gugeeseo.com/wiki/%E8%88%92%E5%B0%94%E8%A1%A5" target="_blank">$\nearrow$</a></font>
